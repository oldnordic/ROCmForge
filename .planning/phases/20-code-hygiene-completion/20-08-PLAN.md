---
phase: 20-code-hygiene-completion
plan: 08
type: execute
wave: 4
depends_on: ["20-06", "20-07"]
files_modified:
  - src/backend/hip_backend/backend.rs
  - src/ggml/hip_backend/mod.rs
  - src/loader/gguf.rs
  - src/ggml/hip_backend/ops/q4_k_dequant.rs
  - src/ggml/hip_backend/ops/q6_k_dequant.rs
  - src/ggml/hip_backend/ops/q4_0_dequant.rs
  - src/ggml/hip_backend/ops/q8_0_dequant.rs
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All #[allow(dead_code)] markers are reviewed and documented"
    - "Zero compiler warnings baseline achieved"
    - "HYGIENE-03 and HYGIENE-07 requirements satisfied"
  artifacts:
    - path: "Multiple dequant cache files"
      provides: "Reviewed #[allow(dead_code)] markers"
      contains: "explanatory comments for all markers"
  key_links:
    - from: "#[allow(dead_code)] markers"
      to: "explanatory comments"
      via: "code review"
      pattern: "#\\[allow\\(dead_code\\)\\]"
---

<objective>
Review existing #[allow(dead_code)] markers and verify zero warnings baseline.

Purpose: Final plan in dead code cleanup. Reviews existing #[allow(dead_code)] markers (HYGIENE-03) and verifies zero warnings baseline (HYGIENE-07).

Output: All dead_code markers documented; zero warnings baseline achieved.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
</context>

<tasks>

<task type="auto">
  <name>Review existing #[allow(dead_code)] markers</name>
  <files></files>
  <action>
    Search for all #[allow(dead_code)] markers:
    grep -rn "#\[allow(dead_code)\]" src/ --include="*.rs"

    For each marker:
    1. Read the context
    2. Verify it's still appropriate (code is still unused for a valid reason)
    3. Add a comment explaining why the dead_code marker exists (e.g., "#[allow(dead_code)] TODO: integrate in Phase X")
    4. Remove the marker if the code is now actually used

    Known locations (from grep analysis):
    - src/ggml/hip_backend/ops/q4_k_dequant.rs (module field in cache struct)
    - src/ggml/hip_backend/ops/q6_k_dequant.rs (module field in cache struct)
    - src/ggml/hip_backend/ops/q4_0_dequant.rs (module field in cache struct)
    - src/ggml/hip_backend/ops/q8_0_dequant.rs (module field in cache struct)

    This satisfies HYGIENE-03 requirement.
  </action>
  <verify>All #[allow(dead_code)] markers have explanatory comments</verify>
  <done>HYGIENE-03 requirement satisfied</done>
</task>

<task type="auto">
  <name>Verify zero warnings baseline achieved</name>
  <files></files>
  <action>
    Run cargo check --features rocm.
    Count total warnings.
    Target: Zero compiler warnings for lib (bin warnings may remain for CLI).

    If warnings remain, categorize and decide:
    - Can they be fixed in this phase? (fix them)
    - Do they require architectural changes? (document in STATE.md as technical debt)
    - Are they acceptable? (add #[allow] with justification)

    The goal is HYGIENE-07: Zero compiler warnings baseline.
  </action>
  <verify>cargo check --features rocm 2>&1 | grep "warning:" | wc -l outputs acceptable count (ideally 0)</verify>
  <done>HYGIENE-07 requirement satisfied (zero warnings baseline)</done>
</task>

</tasks>

<verification>
1. Run cargo check --features rocm and verify warning count is at baseline
2. Confirm all #[allow(dead_code)] markers have explanatory comments
3. Verify all unused items have been reviewed and documented
4. Ensure no truly dead code remains without justification
</verification>

<success_criteria>
- HYGIENE-03 satisfied: All #[allow(dead_code)] markers reviewed and documented
- HYGIENE-07 satisfied: Zero compiler warnings baseline achieved
- All dead_code markers have explanatory comments
- Technical debt documented for items kept for future use
</success_criteria>

<output>
After completion, create `.planning/phases/20-code-hygiene-completion/20-08-SUMMARY.md`
</output>
